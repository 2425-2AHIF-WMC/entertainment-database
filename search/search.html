<!DOCTYPE html>
<<<<<<< HEAD
<html lang="de" >
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title></title>
    <style>
        /* Default Design Guidelines - minimal & elegant */
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #ffffff;
            color: #6b7280;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        header {
            position: sticky;
            top: 0;
            background: #fff;
            border-bottom: 1px solid #e5e7eb;
            box-shadow: 0 2px 8px rgb(0 0 0 / 0.05);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            gap: 1rem;
            flex-wrap: wrap;
        }
        .logo {
            font-weight: 700;
            font-size: 1.75rem;
            color: #111827;
            user-select: none;
            flex-grow: 1;
            min-width: 150px;
        }
        /* Search form inside navbar */
        form#search-form {
            flex-grow: 3;
            max-width: 600px;
            display: flex;
            border: 1px solid #d1d5db;
            border-radius: 0.75rem;
            overflow: hidden;
            background: #f9fafb;
            transition: box-shadow 0.3s ease;
        }
        form#search-form:focus-within {
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.4);
            border-color: #2563eb;
            outline: none;
        }
        form#search-form input[type="search"] {
            flex-grow: 1;
            border: none;
            padding: 0.75rem 1rem;
            font-size: 1.125rem;
            font-weight: 500;
            background: transparent;
            color: #111827;
            outline: none;
        }
        form#search-form button {
            background-color: #2563eb;
            border: none;
            color: white;
            padding: 0 1.25rem;
            font-weight: 700;
            cursor: pointer;
            transition: background 0.3s ease;
            font-size: 1.125rem;
        }
        form#search-form button:hover,
        form#search-form button:focus {
            background-color: #1e40af;
            outline: none;
        }

        main {
            max-width: 1200px;
            margin: 2rem auto 4rem;
            padding: 0 1.5rem;
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        /* Cards grid with wide rectangular cards */
        #results {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        @media (min-width: 640px){
            #results {
                grid-template-columns: repeat(auto-fill, minmax(600px, 1fr));
            }
        }
        .card {
            display: flex;
            gap: 1.5rem;
            background: #f9fafb;
            border-radius: 0.75rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            padding: 1.5rem;
            transition: box-shadow 0.3s ease, transform 0.3s ease;
            cursor: default;
        }
        .card:hover,
        .card:focus-within {
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            transform: translateY(-5px);
            outline: none;
        }
        .card img {
            width: 220px;
            height: 280px;
            object-fit: cover;
            border-radius: 0.75rem;
            flex-shrink: 0;
        }
        .card-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .card-title {
            font-size: 1.75rem;
            font-weight: 700;
            margin: 0 0 0.25rem 0;
            color: #111827;
        }
        .card-type {
            text-transform: uppercase;
            font-weight: 600;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
            color: #6b7280;
            letter-spacing: 0.1em;
        }
        .card-rating,
        .card-info {
            font-weight: 600;
            font-size: 1rem;
            color: #2563eb;
            margin-bottom: 0.5rem;
        }
        .card-description {
            font-size: 1rem;
            color: #4b5563;
        }
    </style>
</head>
<body>
<header>
    <div class="logo" tabindex="0">Entertainment Hub</div>
    <form id="search-form" role="search" aria-label="Suche Filme Serien Bücher">
        <input id="searchInput" type="search" placeholder="Suche Filme, Serien & Bücher..." aria-label="Suchfeld" autocomplete="off" />
        <button type="submit" aria-label="Suche starten">Suchen</button>
    </form>
</header>

<main>
    <section id="results" aria-live="polite" aria-label="Suchergebnisse für Filme, Serien und Bücher"></section>
</main>

<script>
    const filme = [
        { id:'f1', titel:'Inception', bewertung:8.8, beschreibung:'Ein Traum im Traum. Ein Meisterwerk von Christopher Nolan.', bild:'https://image.tmdb.org/t/p/w500/qmDpIHrmpJINaRKAfWQfftjCdyi.jpg', dauer:'148 Min' },
        { id:'f2', titel:'Parasite', bewertung:8.6, beschreibung:'Südkoreanischer Thriller über Klassenunterschiede.', bild:'https://image.tmdb.org/t/p/w500/7IiTTgloJzvGI1TAYymCfbfl3vT.jpg', dauer:'132 Min' }
    ];
    const serien = [
        { id:'s1', titel:'Breaking Bad', bewertung:9.5, beschreibung:'Chemielehrer wird zum Meth-Koch.', bild:'https://image.tmdb.org/t/p/w500/qmDpIHrmpJINaRKAfWQfftjCdyi.jpg', staffeln:5 },
        { id:'s2', titel:'Stranger Things', bewertung:8.7, beschreibung:'Kinder entdecken Übernatürliches.', bild:'https://image.tmdb.org/t/p/w500/q6y0Go1tsGEsmtFryDOJo3dEmqu.jpg', staffeln:4 }
    ];
    const buecher = [
        { id:'b1', titel:'Der Alchimist', bewertung:8.5, beschreibung:'Philosophisches Buch von Paulo Coelho.', bild:'https://images-na.ssl-images-amazon.com/images/I/71aFt4+OTOL.jpg', seiten:208 },
        { id:'b2', titel:'1984', bewertung:9.0, beschreibung:'Dystopischer Roman von George Orwell.', bild:'https://images-na.ssl-images-amazon.com/images/I/81WcnNQ-TBL.jpg', seiten:328 }
    ];

    const allItems = [
        ...filme.map(f => ({...f, type:'Film'})),
        ...serien.map(s => ({...s, type:'Serie'})),
        ...buecher.map(b => ({...b, type:'Buch'})),
    ];

    const resultsContainer = document.getElementById('results');
    const searchInput = document.getElementById('searchInput');
    const searchForm = document.getElementById('search-form');

    function renderCard(item) {
        const card = document.createElement('article');
        card.className = 'card';
        card.tabIndex = 0;
        card.innerHTML = `
        <img src="${item.bild}" alt="${item.titel}" />
        <div class="card-content">
          <p class="card-type">${item.type}</p>
          <h2 class="card-title">${item.titel}</h2>
          <p class="card-rating">Bewertung: ${item.bewertung} ⭐</p>
          <p class="card-info">${
            item.type === 'Film'
                ? item.dauer
                : item.type === 'Serie'
                    ? item.staffeln + ' Staffeln'
                    : item.seiten + ' Seiten'
        }</p>
          <p class="card-description" title="${item.beschreibung}">${item.beschreibung.length > 100 ? item.beschreibung.slice(0, 97) + '...' : item.beschreibung}</p>
        </div>
      `;
        return card;
    }

    function filterAndRender(query) {
        const q = query.trim().toLowerCase();
        resultsContainer.innerHTML = '';
        if(!q) return;
        const filtered = allItems.filter(item => item.titel.toLowerCase().includes(q));
        if(filtered.length === 0) {
            resultsContainer.textContent = 'Keine Ergebnisse gefunden.';
            return;
        }
        filtered.forEach(item => {
            resultsContainer.appendChild(renderCard(item));
        });
    }

    searchInput.addEventListener('input', e => {
        filterAndRender(e.target.value);
    });

    searchForm.addEventListener('submit', e =>{
        e.preventDefault();
        filterAndRender(searchInput.value);
    });
</script>
=======
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>$Title$</title>
</head>
<body>
$END$
>>>>>>> 3b1ff4e51eecfc3f425dcbd0dce3dfcf9ae19435
</body>
</html>



// Login function
async function login(username, email, password) {
try {
const users = await apiRequest('/users');
if (isLoginMode) {
const user = users.find(u => (u.username === username || u.email === email) && u.password === password);
if (!user) {
showAlert('Invalid credentials', 'error');
return false;
}
currentUser  = user;
console.log('User  logged in:', currentUser .username);
} else {
const existingUser  = users.find(u => u.username === username || u.email === email);
if (existingUser ) {
showAlert('Username or email already exists', 'error');
return false;
}

const maxId = users.length > 0 ? Math.max(...users.map(u => parseInt(u.id.replace('u', '')))) : 0;
const newUserId = `u${maxId + 1}`;

const newUser  = {
id: newUserId,
username: username,
email: email,
password: password, // In production, this should be hashed
userRatings: {
filme: {},
buecher: {},
serien: {}
}
};

const createdUser  = await apiRequest('/users', 'POST', newUser );
currentUser  = createdUser ;
console.log('New user registered:', newUser );
console.log('Total users in database:', users.length + 1);
}

updateUIForLoggedInUser ();
saveCurrentUser ();
loginModal.classList.remove('show');
authForm.reset();
return true;
} catch (error) {
console.error('Login/Register error:', error);
showAlert('Connection error. Please try again.', 'error');
return false;
}
}

